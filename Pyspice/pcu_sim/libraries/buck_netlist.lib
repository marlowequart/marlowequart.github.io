*.subckt buck_netlist input_v duty_cycle period
*XX1 input_v duty_cycle period
*.ends buck_netlist



******************************************************************************************************************
* STEPS TO GET FROM LTSPICE NETLIST TO THIS NGSPICE NETLIST:
* Delete everything that's not a subcircuit (including end of file top-level statements such as .tran, .end);
* This file is only a collection of subcircuits, not a complete SPICE netlist.
* Add parameters to each subckt line (just copy from any instantiation of said subcircuit; do not include "params:")
* Change unicode 'mu' to 'u'
* Replace any dash in any subcircuit name with an underscore 
* Add top subcircuit ngspice_top using instantiation line for XX1 in original top-level netlist
******************************************************************************************************************

.subckt buck_netlist input_v duty_cycle period
V1 Vin 0 input_v
C1 P001 0 10u
R1 Vin P001 20m
L1 N001 P002 150u
D1 0 N001 1N5819
C2 P003 0 22u
R2 N002 P002 100m
R3 N002 P003 20m
R4 N002 0 5
V2 gate_drive 0 PULSE(0 10 0 1n 1n duty_cycle period 200)
M1 N001 N003 Vin Vin DMG4435SSS
R6 N003 Vin 10
S1 0 N003 gate_drive 0 SW
.model D D
.lib C:\PROGRA~2\LTC\LTSPIC~1\lib\cmp\standard.dio
.model NMOS NMOS
.model PMOS PMOS
.lib C:\PROGRA~2\LTC\LTSPIC~1\lib\cmp\standard.mos
.model SW SW(Ron=0.002 Roff=1Meg Vt=3.0)
.backanno
.ends buck_netlist


*---------- DMG4435SSS Spice Model ----------
.SUBCKT DMG4435SSS 10 20 30 
*     TERMINALS:  D  G  S
M1 1 2 3 3  PMOS  L = 1E-006  W = 1E-006 
RD 10 1 0.01231 
RS 30 3 0.001 
RG 20 2 6.83 
CGS 2 3 1.465E-009 
EGD 12 30 2 1 1 
VFB 14 30 0 
FFB 2 1  VFB 1 
CGD 13 14 1.556E-009 
R1 13 30 1 
D1 13 12  DLIM 
DDG 14 15  DCGD 
R2 12 15 1 
D2 30 15  DLIM 
DSD 10 3  DSUB 
.MODEL PMOS PMOS  LEVEL = 3  U0 = 164.9  VMAX = 1.945E+005  KP = 39.94 
+ ETA = 0.005129  TOX = 6E-008  NSUB = 1.104E+016  KAPPA = 3.689  VTO = -2.072 
.MODEL DCGD D  CJO = 7.47E-010  VJ = 0.518  M = 0.3662 
.MODEL DSUB D  IS = 2.364E-010  N = 1.296  RS = 0.007836  BV = 33  
+CJO = 9.148E-011  VJ = 0.644  M = 0.663 
.MODEL DLIM D  IS = 0.0001 
.ENDS
*Diodes DMG4435SSS Spice Model v1.0 Last Revised 2010/9/14




*V1 Vin 0 input_v
*C1 P001 0 10u
*R1 Vin P001 20m
*L1 N001 P002 150u
*D1 0 N001 1N5819
*C2 P003 0 22u
*R2 N002 P002 100m
*R3 N002 P003 20m
*R4 N002 0 5
*V2 gate_drive 0 PULSE(0 10 0 1n 1n duty_cycle period 200)
*M1 N001 N003 Vin Vin FDS6675
*R6 N003 Vin 10
*S1 0 N003 gate_drive 0 SW

*.model D D
*.lib C:\PROGRA~2\LTC\LTSPIC~1\lib\cmp\standard.dio
*.model NMOS NMOS
*.model PMOS PMOS
*.lib C:\PROGRA~2\LTC\LTSPIC~1\lib\cmp\standard.mos
*.model SW SW(Ron=0.002 Roff=1Meg Vt=3.0)
*.backanno
*.end